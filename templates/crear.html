{% extends "base.html" %}  <!-- Si tienes una base.html, si no, usa el formato completo como home.html -->
{% block content %}
<div class="container mt-4">
    <h2>Registrar Nueva Factura</h2>
    <form method="POST" action="{{ url_for('crear_factura') }}" enctype="multipart/form-data">
        <!-- Datos Básicos -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label for="ruc" class="form-label">RUC</label>
                <input type="text" class="form-control" id="ruc" name="ruc" required maxlength="11">
            </div>
            <div class="col-md-4">
                <label for="serie" class="form-label">Serie</label>
                <input type="text" class="form-control" id="serie" name="serie" required>
            </div>
            <div class="col-md-4">
                <label for="num_documento" class="form-label">Número</label>
                <input type="text" class="form-control" id="num_documento" name="num_documento" required>
            </div>
        </div>

        <!-- Dropdowns -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label for="id_proyecto" class="form-label">Proyecto</label>
                <select class="form-select" id="id_proyecto" name="id_proyecto" required>
                    <option value="">Seleccionar...</option>
                    {% for proyecto in proyectos %}
                    <option value="{{ proyecto[0] }}">{{ proyecto[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="id_producto" class="form-label">Producto</label>
                <select class="form-select" id="id_producto" name="id_producto" required>
                    <option value="">Seleccionar...</option>
                    {% for producto in productos %}
                    <option value="{{ producto[0] }}">{{ producto[1] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="id_ciudad" class="form-label">Ciudad</label>
                <select class="form-select" id="id_ciudad" name="id_ciudad" required>
                    <option value="">Seleccionar...</option>
                    {% for ciudad in ciudades %}
                    <option value="{{ ciudad[0] }}">{{ ciudad[1] }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- En la sección de Campos Adicionales, añade esto: -->
<div class="row mb-3">
    <div class="col-md-4">
        <label for="modalidad" class="form-label">Modalidad</label>
        <select class="form-select" id="modalidad" name="modalidad" required>
            <option value="">Seleccionar...</option>
            <option value="VIATICOS LIMA">VIATICOS LIMA</option>
            <option value="VIATICOS SUR">VIATICOS SUR</option>
            <option value="VIATICOS NORTE">VIATICOS NORTE</option>
            <option value="CAJA CHICA LIMA">CAJA CHICA LIMA</option>
            <option value="CAJA CHICA AQP">CAJA CHICA AQP</option>
            <option value="CAJA CHICA CIX">CAJA CHICA CIX</option>
        </select>
    </div>
    <!-- Mantén los otros campos que ya tienes -->
</div>


        <!-- Campos Adicionales -->
        <div class="row mb-3">
            <div class="col-md-3">
                <label for="fecha_emision" class="form-label">Fecha Emisión</label>
                <input type="date" class="form-control" id="fecha_emision" name="fecha_emision" required>
            </div>
            <div class="col-md-3">
                <label for="importe" class="form-label">Importe (S/)</label>
                <input type="number" step="0.01" class="form-control" id="importe" name="importe" required>
            </div>
            <div class="col-md-3">
                <label for="tipo_comprobante" class="form-label">Tipo Comprobante</label>
                <select class="form-select" id="tipo_comprobante" name="tipo_comprobante" required>
                    <option value="Factura">Factura</option>
                    <option value="Boleta">Boleta</option>
                </select>
            </div>
            <div class="col-md-3">
                <div class="form-check mt-4 pt-3">
                    <input class="form-check-input" type="checkbox" id="incluye_igv" name="incluye_igv">
                    <label class="form-check-label" for="incluye_igv">Incluye IGV</label>
                </div>
            </div>
        </div>

        <!-- URL del Documento -->
        <div class="mb-3">
            <label for="documento" class="form-label">Subir Documento (PDF, PNG, JPG)</label>
            <input type="file" class="form-control" id="documento" name="documento" accept=".pdf,.png,.jpg,.jpeg">
        </div>

        <button type="submit" class="btn btn-primary">Guardar Factura</button>
        <a href="{{ url_for('home') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}